[
  {
    "objectID": "Untitled.html",
    "href": "Untitled.html",
    "title": "Exercise 21 and 22",
    "section": "",
    "text": "library(dataRetrieval)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(dplyr)\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──\n✔ broom        1.0.7     ✔ rsample      1.2.1\n✔ dials        1.3.0     ✔ tune         1.2.1\n✔ infer        1.0.7     ✔ workflows    1.1.4\n✔ modeldata    1.4.0     ✔ workflowsets 1.1.0\n✔ parsnip      1.2.1     ✔ yardstick    1.3.2\n✔ recipes      1.1.0     \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Use suppressPackageStartupMessages() to eliminate package startup messages\n\nlibrary(zoo)\n\n\nAttaching package: 'zoo'\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\nlibrary(lubridate)\nlibrary(tsibble)\n\nRegistered S3 method overwritten by 'tsibble':\n  method               from \n  as_tibble.grouped_df dplyr\n\nAttaching package: 'tsibble'\n\nThe following object is masked from 'package:zoo':\n\n    index\n\nThe following object is masked from 'package:lubridate':\n\n    interval\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, union\n\nlibrary(feasts)\n\nLoading required package: fabletools\n\nAttaching package: 'fabletools'\n\nThe following object is masked from 'package:yardstick':\n\n    accuracy\n\nThe following object is masked from 'package:parsnip':\n\n    null_model\n\nThe following objects are masked from 'package:infer':\n\n    generate, hypothesize\n\nlibrary(plotly)\n\n\nAttaching package: 'plotly'\n\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n\nThe following object is masked from 'package:stats':\n\n    filter\n\nThe following object is masked from 'package:graphics':\n\n    layout\n\n# Example: Cache la Poudre River at Mouth (USGS site 06752260)\npoudre_flow &lt;- readNWISdv(siteNumber = \"06752260\",    # Download data from USGS for site 06752260\n                          parameterCd = \"00060\",      # Parameter code 00060 = discharge in cfs)\n                          startDate = \"2013-01-01\",   # Set the start date\n                          endDate = \"2023-12-31\") |&gt;  # Set the end date\n  renameNWISColumns() |&gt;                              # Rename columns to standard names (e.g., \"Flow\", \"Date\")\n  mutate(Date = yearmonth(Date)) |&gt;                   # Convert daily Date values into a year-month format (e.g., \"2023 Jan\")\n  group_by(Date) |&gt;                                   # Group the data by the new monthly Date\n  summarise(Flow = mean(Flow))                       # Calculate the average daily flow for each month\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=06752260&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2013-01-01&endDT=2023-12-31\n\n\n#1: Convert to tsibble\n\npoud_tbl &lt;- as_tsibble(poudre_flow)\n\nUsing `Date` as index variable.\n\nhead(poud_tbl)\n\n# A tsibble: 6 x 2 [1M]\n      Date   Flow\n     &lt;mth&gt;  &lt;dbl&gt;\n1 2013 Jan  18.1 \n2 2013 Feb  18.0 \n3 2013 Mar   8.21\n4 2013 Apr   5.94\n5 2013 May 333.  \n6 2013 Jun 300.  \n\n\n#2: Plotting the time series\n\nflow_plot &lt;- ggplot(poudre_flow, aes(x = Date, y = Flow)) + \n  geom_line(color = \"blue\") + \n  labs(title = \"Cache la Poudre River Streamflow\", \n       x = \"Date\", y = \"Flow (cfs)\") + \n  theme_minimal ()\nggplotly(flow_plot)\n\n\n\n\n\n#3: Subseries plot\n\ngg_subseries(poud_tbl) + \n  labs(title = \"Monthly Streamflow Patterns\", y = \"Flow\", x = \"Year\") + \n  theme_minimal()\n\nPlot variable not specified, automatically selected `y = Flow`\n\n\n\n\n\n\n\n\n\n#I noticed very high streamflow levels in May and June. This could be caused by spring precipitation, snowmelt, or glacial melt when temperatures begin increasing after winter. I also noticed that streamflow is very consistently low from October to March, which could be consistent with cooler temperatures preventing melting of snow, as well as less precipitation in general. The subseries compares streamflow taken at the same time each year for 10 years, so that we can compare differences from year to year in streamflow. Things like flooding can be seen, and in this subseries there is a possible flood in September within the 10 year period.\n#4: Decompose\n\npoud_decomp &lt;- stl(poud_tbl, s.window = \"periodic\") |&gt;\n  plot()\n\n\n\n\n\n\n\n\n#Seasonal streamflow has stayed relatively the same across the data, which spans over a 10 year period. see small patterns of lower streamflow in 2020 versus higher streamflow in 2014-2016. Seasonal portrayal of the data is the most effective due to the seasonal changes of streamflow, which increase and decrease in relation to snowmelt and rainfall."
  },
  {
    "objectID": "exercise_21_and_22.html",
    "href": "exercise_21_and_22.html",
    "title": "Exercise 21 and 22",
    "section": "",
    "text": "library(dataRetrieval)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(dplyr)\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──\n✔ broom        1.0.7     ✔ rsample      1.2.1\n✔ dials        1.3.0     ✔ tune         1.2.1\n✔ infer        1.0.7     ✔ workflows    1.1.4\n✔ modeldata    1.4.0     ✔ workflowsets 1.1.0\n✔ parsnip      1.2.1     ✔ yardstick    1.3.2\n✔ recipes      1.1.0     \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Dig deeper into tidy modeling with R at https://www.tmwr.org\n\nlibrary(zoo)\n\n\nAttaching package: 'zoo'\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\nlibrary(lubridate)\nlibrary(tsibble)\n\nRegistered S3 method overwritten by 'tsibble':\n  method               from \n  as_tibble.grouped_df dplyr\n\nAttaching package: 'tsibble'\n\nThe following object is masked from 'package:zoo':\n\n    index\n\nThe following object is masked from 'package:lubridate':\n\n    interval\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, union\n\nlibrary(feasts)\n\nLoading required package: fabletools\n\nAttaching package: 'fabletools'\n\nThe following object is masked from 'package:yardstick':\n\n    accuracy\n\nThe following object is masked from 'package:parsnip':\n\n    null_model\n\nThe following objects are masked from 'package:infer':\n\n    generate, hypothesize\n\nlibrary(plotly)\n\n\nAttaching package: 'plotly'\n\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n\nThe following object is masked from 'package:stats':\n\n    filter\n\nThe following object is masked from 'package:graphics':\n\n    layout\n\n# Example: Cache la Poudre River at Mouth (USGS site 06752260)\npoudre_flow &lt;- readNWISdv(siteNumber = \"06752260\",    # Download data from USGS for site 06752260\n                          parameterCd = \"00060\",      # Parameter code 00060 = discharge in cfs)\n                          startDate = \"2013-01-01\",   # Set the start date\n                          endDate = \"2023-12-31\") |&gt;  # Set the end date\n  renameNWISColumns() |&gt;                              # Rename columns to standard names (e.g., \"Flow\", \"Date\")\n  mutate(Date = yearmonth(Date)) |&gt;                   # Convert daily Date values into a year-month format (e.g., \"2023 Jan\")\n  group_by(Date) |&gt;                                   # Group the data by the new monthly Date\n  summarise(Flow = mean(Flow))                       # Calculate the average daily flow for each month\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=06752260&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2013-01-01&endDT=2023-12-31\n\n\n#1: Convert to tsibble\n\npoud_tbl &lt;- as_tsibble(poudre_flow)\n\nUsing `Date` as index variable.\n\nhead(poud_tbl)\n\n# A tsibble: 6 x 2 [1M]\n      Date   Flow\n     &lt;mth&gt;  &lt;dbl&gt;\n1 2013 Jan  18.1 \n2 2013 Feb  18.0 \n3 2013 Mar   8.21\n4 2013 Apr   5.94\n5 2013 May 333.  \n6 2013 Jun 300.  \n\n\n#2: Plotting the time series\n\nflow_plot &lt;- ggplot(poudre_flow, aes(x = Date, y = Flow)) + \n  geom_line(color = \"blue\") + \n  labs(title = \"Cache la Poudre River Streamflow\", \n       x = \"Date\", y = \"Flow (cfs)\") + \n  theme_minimal ()\nggplotly(flow_plot)\n\n\n\n\n\n#3: Subseries plot\n\ngg_subseries(poud_tbl) + \n  labs(title = \"Monthly Streamflow Patterns\", y = \"Flow\", x = \"Year\") + \n  theme_minimal()\n\nPlot variable not specified, automatically selected `y = Flow`\n\n\n\n\n\n\n\n\n\n#I noticed very high streamflow levels in May and June. This could be caused by spring precipitation, snowmelt, or glacial melt when temperatures begin increasing after winter. I also noticed that streamflow is very consistently low from October to March, which could be consistent with cooler temperatures preventing melting of snow, as well as less precipitation in general. The subseries compares streamflow taken at the same time each year for 10 years, so that we can compare differences from year to year in streamflow. Things like flooding can be seen, and in this subseries there is a possible flood in September within the 10 year period.\n#4: Decompose\n\npoud_decomp &lt;- stl(poud_tbl, s.window = \"periodic\") |&gt;\n  plot()\n\n\n\n\n\n\n\n\n#Seasonal streamflow has stayed relatively the same across the data, which spans over a 10 year period. see small patterns of lower streamflow in 2020 versus higher streamflow in 2014-2016. Seasonal portrayal of the data is the most effective due to the seasonal changes of streamflow, which increase and decrease in relation to snowmelt and rainfall."
  }
]